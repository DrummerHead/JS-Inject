<!doctype html>
<html>
<head>
  <title>timeBar</title>
  <meta name='author' content='DrummerHead'>
  <link rel='stylesheet' href='../../css/promiscuous.css'>
  <link rel='stylesheet' href='examples.css'>
</head>
<body>

<header id='quoin'>
  <div id='brand'>
    <a href='/' title='Go to mcdlr homepage'>Go to mcdlr homepage</a>
  </div>
  <div id='octo-peek'>
    <a href='https://github.com/DrummerHead/JS-Inject/blob/master/examples/minutedock.js' rel='external'><span>Fork me on Github!</span></a>
  </div>
</header>

<small>Drag the below link to your bookmarks</small>
<a href="javascript:(function(){ var tempus = new Date() , miliInADay = 86400000 , miliInAWeek = miliInADay * 7 , miliInAMonth = miliInADay * 30 , rightNow = tempus.getTime() , todayStarted = new Date().setHours(0, 0, 0, 0) , miliElapsedToday = rightNow - todayStarted , weekDay = (tempus.getDay() + 6) %257 , weekDayMili = weekDay * miliInADay , miliElapsedInWeek = weekDayMili + miliElapsedToday , weekPercentage = miliElapsedInWeek * 100 / miliInAWeek , monthFirstDay = tempus.setDate(1) , monthBegins = tempus.setHours(0, 0, 0, 0) , monthNow = rightNow - monthBegins , monthPercentage = monthNow * 100 / miliInAMonth , $brief = $$(%27.brief%27) , regexMonthly = /monthly/ , regexWeekly = /weekly/ ; var makeTimeBar = function(n){ var barHTML = %27&lt;div class=%22progress_bar_track%22 title=%22If the timeBar is shorter than the bar above it: Yey!%22&gt;&lt;div class=%22progress_bar%22&gt;&lt;div style=%22width: %27 + n + %27%25%22 class=%22progress%22&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;%27; return barHTML }; $brief.each(function(el){ var $briefPeriod = el.down(%27.normal .period%27) , briefPeriodText = $briefPeriod.textContent.strip() , $progressBarTrack = el.down(%27.progress_bar_track%27) , isMonth = regexMonthly.test(briefPeriodText) , isWeek = regexWeekly.test(briefPeriodText) ; if(isMonth){ $progressBarTrack.insert({after : makeTimeBar(monthPercentage)}); } else if(isWeek){ $progressBarTrack.insert({after : makeTimeBar(weekPercentage)}); } }); })();">timeBar</a>

</body>
</html>
